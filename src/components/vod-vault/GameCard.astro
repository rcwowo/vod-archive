---
import { Card } from '@/components/ui/card'

interface Props {
  game: string
  coverUrl: string
  vodCount: number
}

const { game, coverUrl, vodCount } = Astro.props
---

<Card className="group relative overflow-hidden border bg-card">
  <a
    href={`/games/${game.toLowerCase().replace(/[^a-z0-9]+/g, '-')}`}
    class="relative block aspect-[3/4]"
  >
  <div class="absolute inset-x-0 top-0 z-20 h-0.5 bg-primary" />
  <div class="absolute inset-x-0 top-0 z-30 h-0.5 bg-gradient-to-r from-primary to-accent opacity-0 transition-opacity duration-500 group-hover:opacity-100" />

    {coverUrl ? (
      <img
        src={coverUrl}
        alt={`Game cover for ${game}`}
        class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.04]"
      />
    ) : (
      <div class="absolute inset-0 bg-muted" />
    )}

    <div class="pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-500 group-hover:opacity-100">
      <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/30"></div>
    </div>

    <div class="absolute left-0 right-0 top-0 z-30 p-2">
      <div class="flex flex-wrap items-center gap-2">
        <span class="bg-black/45 px-2 py-1 text-xs text-white backdrop-blur-sm border border-white/10">
          {vodCount} video{vodCount === 1 ? '' : 's'}
        </span>
      </div>
    </div>

    <div class="absolute inset-x-0 bottom-0 z-20 backdrop-blur-sm transition-opacity duration-500 opacity-0 group-hover:opacity-100">
      <div class="border-t border-white/10 bg-black/50  px-3 py-2">
        <h3 class="text-center text-white font-semibold truncate transform translate-y-2 transition-transform duration-500 group-hover:translate-y-0">{game}</h3>
      </div>
    </div>

    <div class="pointer-events-none absolute left-[-30%] top-0 z-40 h-full w-1/3 -skew-x-12 bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 transition-all duration-700 group-hover:left-[120%] group-hover:opacity-100"></div>
  </a>
</Card>
